#include <stdio.h>
#define MAX_MEMORY 1000

int memory[MAX_MEMORY];

void initializeMemory() {
    for (int i = 0; i < MAX_MEMORY; i++)
        memory[i] = -1; // -1 indicates free block
}

void displayMemory() {
    printf("Memory Status:\n");
    for (int i = 0; i < MAX_MEMORY;) {
        if (memory[i] == -1) {
            int start = i;
            while (i < MAX_MEMORY && memory[i] == -1)
                i++;
            printf("Free block %d–%d\n", start, i - 1);
        } else {
            i++;
        }
    }
}

void allocateMemory(int processId, int size) {
    int worstStart = -1, worstSize = -1;
    for (int i = 0; i < MAX_MEMORY;) {
        if (memory[i] == -1) {
            int start = i;
            int count = 0;
            while (i < MAX_MEMORY && memory[i] == -1) {
                count++;
                i++;
            }
            if (count >= size && count > worstSize) {
                worstSize = count;
                worstStart = start;
            }
        } else {
            i++;
        }
    }

    if (worstStart != -1) {
        for (int i = worstStart; i < worstStart + size; i++)
            memory[i] = processId;
        printf("Allocated block %d–%d to Process %d\n", worstStart, worstStart + size - 1, processId);
    } else {
        printf("Allocation failed for Process %d\n", processId);
    }
}

void deallocateMemory(int processId) {
    for (int i = 0; i < MAX_MEMORY; i++) {
        if (memory[i] == processId)
            memory[i] = -1;
    }
    printf("Memory released by Process %d\n", processId);
}

int main() {
    initializeMemory();
    displayMemory();

    allocateMemory(1, 200);
    displayMemory();

    allocateMemory(2, 300);
    displayMemory();

    deallocateMemory(1);
    displayMemory();

    allocateMemory(3, 400);
    displayMemory();

    return 0;
}
